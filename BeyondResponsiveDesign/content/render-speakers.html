<article class="scrollcontainer vscroll">
    <section>
        <table>
            <tbody data-bind="foreach: speakers">
                <tr>
                    <td><img height="100" width="100" data-bind="attr: { src: 'images/speakers/' + Id + '.jpg' }" /></td>
                    <td><h2 class="speakerName" data-bind="text: Name"></h2></td>
                    <td class="bio" data-bind="html: Bio"></td>
                    <td style="display:none">
                        <div class="speakerdetail" style="display: none">
                            <div class="scrollcontainer vscroll">
                                <section class="presentation">
                                    <div class="responsiveimage">
                                        <img class="rounded" data-bind="attr: { src: 'images/speakers/' + Id + '.jpg' }" />
                                    </div>
                                </section>
                                <section class="presentation">
                                    <div class="speakerLinks">
                                        <ul data-bind="foreach: Links">
                                            <li>
                                                <i data-bind="attr: { class: 'fa fa-lg ' + Icon }"></i>
                                                <a data-bind="attr: { href: Url }, text: Url"></a>
                                            </li>
                                        </ul>
                                    </div>
                                </section>
                                <section class="presentation">
                                    <header>
                                        <h2>
                                            <i class="fa fa-lg fa-group"></i>
                                            <span>Bio</span>
                                        </h2>
                                    </header>
                                    <div class="bio" data-bind="html: Bio"></div>
                                </section>
                                <section class="presentation">
                                    <header>
                                        <h2>
                                            <i class="fa fa-lg fa-list"></i>
                                            <span>Sessions</span>
                                        </h2>
                                    </header>
                                    <div>
                                        <!-- ko foreach: Sessions -->
                                        <h2 data-bind="text: Title"></h2>
                                        <p data-bind="text: Day + ' ' + TimeSlotId"></p>
                                        <div data-bind="html: Abstract"></div>
                                        <!-- /ko -->
                                    </div>
                                </section>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </section>
</article>
<aside class="propertySheet wide offRight"></aside>
<script type="text/javascript">
    $(function () {
        $.get("content/speakers.json").done(function (data) {
            ko.applyBindings({
                speakers: data
            }, $("main > article")[0]);

            $("body").off('click', 'tr');
            $("body").on('click', 'tr', function (e) {
                var source = $(this).find("div.speakerdetail");
                var speakerName = $(this).find(".speakerName").text();

                if (source.length > 0) {
                    window.interactions.openPropertySheet(null, speakerName).done(function () {
                        $("main > aside").empty().html(source.html());
                    });
                }

                e.stopPropagation();
                e.preventDefault();
            });
        });
    });
</script>
<style type="text/css">
    body > main > article > section > table > tbody > tr > td.bio {
        max-width: 35em;
    }
    .speakerLinks > ul {
        list-style: none;
        padding: 0;
        margin: 0 0 1em 0;
    }

    .speakerLinks > ul > li > i {
        padding: 0 0.25em 0 0.25em;
    }
</style>